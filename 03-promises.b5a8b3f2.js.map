{"mappings":"gfACA,IAAAA,EAAAC,EAAA,SAGMC,EAAOC,SAASC,cAAc,SAC9BC,EAASH,EAAKE,cAAc,yBAiBPF,EAAtBI,iBAAiB,UAAU,SAACC,GAC/BA,EAAIC,iBACJ,IAAMC,EAAQC,OAAOR,EAAKS,SAASC,MAAMC,OACnCC,EAAOJ,OAAOR,EAAKS,SAASG,KAAKD,OACjCE,EAASL,OAAOR,EAAKS,SAASI,OAAOF,OAE3CR,EAAOW,UAAW,EAGwB,IAApCC,EAAWC,MAAMC,KAAK,CAAEC,OAAQL,IAAU,SAACM,EAAGC,GAIlD,OA3B2C,SAAxBC,EAAUX,GAC/B,OAAO,IAAIY,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACaC,KAAKC,SAAW,GAEpCJ,EAAQ,CAAEF,WAAUX,UAEpBc,EAAO,CAAEH,WAAUX,S,GAEpBA,E,IAkBIkB,CAHUR,EAAQ,EACJb,EAAQK,EAAOQ,E,IAM4DE,QAA1FO,WAAWd,EAASe,KAAI,SAACC,EAASX,GACxC,IAAMC,EAAWD,EAAQ,EACzB,OAAOW,EACJC,MAAK,SAAAC,G,IAAGvB,EAAKuB,EAALvB,MACNZ,EAAAoC,OAAOC,QAAQ,uBAAwCC,OAAff,EAAS,QAAYe,OAAN1B,EAAM,M,IAE/D2B,OAAM,SAAAJ,G,IAAGvB,EAAKuB,EAALvB,MACRZ,EAAAoC,OAAOI,QAAQ,sBAAuCF,OAAff,EAAS,QAAYe,OAAN1B,EAAM,M,QAKhD2B,OAAX,SAACE,GACNC,QAAQD,MAAMA,E,IAGfE,SAAQ,WACPtC,EAAOW,UAAW,C","sources":["src/js/03-promises.js"],"sourcesContent":["// Імпортуємо бібліотеку Notiflix\nimport { Notify } from 'notiflix/build/notiflix-notify-aio';\n\n// Знаходимо форму та кнопку \"submit\"\nconst form = document.querySelector('.form');\nconst button = form.querySelector('button[type=\"submit\"]');\n\n// Функція, яка створює обіцянку з випадковим результатом\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const shouldResolve = Math.random() > 0.3; \n      if (shouldResolve) {\n        resolve({ position, delay }); \n      } else {\n        reject({ position, delay }); \n      }\n    }, delay);\n  });\n}\n\n// Додаємо обробник події на форму\nform.addEventListener('submit', (evt) => {\n  evt.preventDefault(); \n  const delay = Number(form.elements.delay.value);\n  const step = Number(form.elements.step.value); \n  const amount = Number(form.elements.amount.value); \n  \n  button.disabled = true; // Блокуємо кнопку \"submit\", після натискання\n\n  // Створюємо масив обіцянок з випадковою затримкою\n  const promises = Array.from({ length: amount }, (_, index) => {\n    const position = index + 1; \n    const promiseDelay = delay + step * index; \n\n    return createPromise(position, promiseDelay); \n  });\n\n   // Виконуємо всі проміси зі створеного масиву промісів і виводимо повідомлення про успішне виконання чи невиконання\n  Promise.allSettled(promises.map((promise, index) => {\n    const position = index + 1;\n    return promise\n      .then(({ delay }) => {\n         Notify.success(`✅ Fulfilled promise ${position} in ${delay}ms`);\n      })\n      .catch(({ delay }) => {\n        Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`);\n      });\n    \n  }))\n    // Обробляємо помилки.\n  .catch((error) => {\n    console.error(error);\n  })\n    //Активуємо кнопку \n  .finally(() => {\n    button.disabled = false;\n  });\n});\n\n"],"names":["$h6c0i","parcelRequire","$ce04d3a99e08e73b$var$form","document","querySelector","$ce04d3a99e08e73b$var$button","addEventListener","evt","preventDefault","delay1","Number","elements","delay","value","step","amount","disabled","promises","Array","from","length","_","index","position","Promise","resolve","reject","setTimeout","Math","random","$ce04d3a99e08e73b$var$createPromise","allSettled","map","promise","then","param","Notify","success","concat","catch","failure","error","console","finally"],"version":3,"file":"03-promises.b5a8b3f2.js.map"}